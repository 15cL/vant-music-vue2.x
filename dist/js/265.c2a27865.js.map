{"version":3,"file":"js/265.c2a27865.js","mappings":"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","sources":["webpack://vue-littlefivemusic/./src/views/search/SearchView.vue","webpack://vue-littlefivemusic/src/views/search/SearchView.vue","webpack://vue-littlefivemusic/./src/views/search/SearchView.vue?7d82","webpack://vue-littlefivemusic/./src/views/search/SearchView.vue?e3c9"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search_page\"},[_c('header',[_c('span',{staticClass:\"iconfont icon-xiangzuo\",staticStyle:{\"font-size\":\"1.1rem\",\"width\":\"10%\"},on:{\"click\":function($event){return _vm.backBtn(_vm.searchInput)}}}),_c('van-field',{ref:\"input_van\",staticStyle:{\"border-radius\":\"3rem\",\"width\":\"70%\"},attrs:{\"left-icon\":\"search\",\"placeholder\":\"你好\",\"autofocus\":\"\"},on:{\"input\":function($event){return _vm.checkKeyword(_vm.searchInput)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.searchSong(_vm.searchInput)}},model:{value:(_vm.searchInput),callback:function ($$v) {_vm.searchInput=$$v},expression:\"searchInput\"}}),_c('p',{on:{\"click\":function($event){return _vm.searchSong(_vm.searchInput)}}},[_vm._v(\"搜索\")])],1),_c('section',{ref:\"wrapper\"},[_c('div',{staticClass:\"content\"},[_c('div',[(_vm.searchInput || _vm.searchFlag)?_c('div',{staticClass:\"my_search\"},[(!_vm.searchInput)?_c('div',{staticClass:\"search_org\"},[(_vm.key_history[0])?_c('div',{staticClass:\"search_history\"},[_c('header',[_c('h3',[_vm._v(\"历史\")]),_c('van-icon',{attrs:{\"name\":\"delete\",\"size\":\"20\"},on:{\"click\":_vm.deleteAll}})],1),_c('ul',_vm._l((_vm.key_history),function(key,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.searchSong(key)}}},[_vm._v(\" \"+_vm._s(key)+\" \")])}),0)]):_vm._e(),_c('div',{staticClass:\"search_history\"},[_vm._m(0),_c('ul',_vm._l((_vm.ideas),function(idea,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.searchSong(idea.first)}}},[_vm._v(\" \"+_vm._s(idea.first)+\" \")])}),0)]),_c('div',{staticClass:\"search_hot\"},[_c('h2',[_vm._v(\"热搜榜\")]),_c('ul',_vm._l((_vm.searchHot),function(hot,index){return _c('li',{key:hot.score,on:{\"click\":function($event){return _vm.searchSong(hot.searchWord)}}},[_c('span',{style:({ color: index == _vm.hotIndex[index] ? 'gold' : '' })},[_vm._v(_vm._s(index + 1))]),_c('p',[_vm._v(_vm._s(hot.searchWord))]),_c('van-icon',{attrs:{\"name\":hot.iconUrl}})],1)}),0)])]):_vm._e(),(!_vm.searchFlag)?_c('div',{staticClass:\"search_res\"},[(_vm.searchSongRes.searchQcReminder)?_c('div',{staticClass:\"tip\"},_vm._l((_vm.searchSongRes.searchQcReminder\n                  .qcReminders),function(qcReminder,index){return _c('span',{key:index,style:({\n                  color: qcReminder.highLight ? 'rgb(110, 110, 171)' : '',\n                  textDecoration: qcReminder.highLight ? 'underline' : '',\n                })},[_vm._v(_vm._s(qcReminder.qcReminderPart))])}),0):_vm._e(),_c('h2',[_vm._v(\"单曲\")]),_c('van-list',{staticClass:\"ul_song\",attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.searchSongRes.songs),function(song,index){return _c('li',{key:song.id,staticClass:\"li_song\",on:{\"click\":function($event){return _vm.toPlay(song.id, song, index)}}},[(_vm.tapFlag !== index)?_c('span',[_vm._v(_vm._s(index + 1))]):_c('span',{staticClass:\"iconfont icon-bar-chart-fill\",staticStyle:{\"color\":\"orange\",\"font-size\":\"1.3rem\"}}),_c('div',{staticClass:\"zj_text\"},[_c('h3',{class:_vm.tapFlag == index ? 'active' : ''},[_vm._v(\" \"+_vm._s(song.name)+\" \")]),_c('div',{staticClass:\"gray csl\"},[_c('span',[_vm._v(_vm._s(song.ar))]),_vm._v(\" - \"+_vm._s(song.al.name)+\" \")])]),_c('span',{staticClass:\"iconfont icon-yuandiancaidan\"})])}),0)],1):_vm._e()]):_vm._e(),(_vm.searchInput && _vm.searchFlag)?_c('div',{staticClass:\"search_tip\"},[_c('ul',_vm._l((_vm.searchTips),function(tip){return _c('li',{key:tip.id,on:{\"click\":function($event){return _vm.searchSong(tip.name)}}},[_c('van-icon',{attrs:{\"name\":\"search\"}}),_vm._v(\" \"),_c('span',[_vm._v(\" \"+_vm._s(tip.name))])],1)}),0)]):_vm._e()])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('header',[_c('h3',[_vm._v(\"推荐\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search_page\">\r\n    <header>\r\n      <span\r\n        @click=\"backBtn(searchInput)\"\r\n        class=\"iconfont icon-xiangzuo\"\r\n        style=\"font-size: 1.1rem; width: 10%\"\r\n      ></span>\r\n      <van-field\r\n        ref=\"input_van\"\r\n        v-model=\"searchInput\"\r\n        left-icon=\"search\"\r\n        placeholder=\"你好\"\r\n        autofocus\r\n        style=\"border-radius: 3rem; width: 70%\"\r\n        @input=\"checkKeyword(searchInput)\"\r\n        @keyup.enter=\"searchSong(searchInput)\"\r\n      />\r\n      <p @click=\"searchSong(searchInput)\">搜索</p>\r\n    </header>\r\n    <section ref=\"wrapper\">\r\n      <div class=\"content\">\r\n        <div>\r\n          <div class=\"my_search\" v-if=\"searchInput || searchFlag\">\r\n            <div class=\"search_org\" v-if=\"!searchInput\">\r\n              <div class=\"search_history\" v-if=\"key_history[0]\">\r\n                <header>\r\n                  <h3>历史</h3>\r\n                  <van-icon\r\n                    name=\"delete\"\r\n                    size=\"20\"\r\n                    @click=\"deleteAll\"\r\n                  ></van-icon>\r\n                </header>\r\n                <ul>\r\n                  <li\r\n                    v-for=\"(key, index) of key_history\"\r\n                    :key=\"index\"\r\n                    @click=\"searchSong(key)\"\r\n                  >\r\n                    {{ key }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div class=\"search_history\">\r\n                <header>\r\n                  <h3>推荐</h3>\r\n                </header>\r\n                <ul>\r\n                  <li\r\n                    v-for=\"(idea, index) of ideas\"\r\n                    :key=\"index\"\r\n                    @click=\"searchSong(idea.first)\"\r\n                  >\r\n                    {{ idea.first }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div class=\"search_hot\">\r\n                <h2>热搜榜</h2>\r\n                <ul>\r\n                  <li\r\n                    v-for=\"(hot, index) in searchHot\"\r\n                    :key=\"hot.score\"\r\n                    @click=\"searchSong(hot.searchWord)\"\r\n                  >\r\n                    <span\r\n                      :style=\"{ color: index == hotIndex[index] ? 'gold' : '' }\"\r\n                      >{{ index + 1 }}</span\r\n                    >\r\n                    <p>{{ hot.searchWord }}</p>\r\n                    <van-icon :name=\"hot.iconUrl\"></van-icon>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div class=\"search_res\" v-if=\"!searchFlag\">\r\n              <div class=\"tip\" v-if=\"searchSongRes.searchQcReminder\">\r\n                <span\r\n                  v-for=\"(qcReminder, index) of searchSongRes.searchQcReminder\r\n                    .qcReminders\"\r\n                  :key=\"index\"\r\n                  :style=\"{\r\n                    color: qcReminder.highLight ? 'rgb(110, 110, 171)' : '',\r\n                    textDecoration: qcReminder.highLight ? 'underline' : '',\r\n                  }\"\r\n                  >{{ qcReminder.qcReminderPart }}</span\r\n                >\r\n              </div>\r\n              <h2>单曲</h2>\r\n              <van-list\r\n                class=\"ul_song\"\r\n                v-model=\"loading\"\r\n                :finished=\"finished\"\r\n                finished-text=\"没有更多了\"\r\n                @load=\"onLoad\"\r\n              >\r\n                <li\r\n                  class=\"li_song\"\r\n                  v-for=\"(song, index) in searchSongRes.songs\"\r\n                  :key=\"song.id\"\r\n                  @click=\"toPlay(song.id, song, index)\"\r\n                >\r\n                  <span v-if=\"tapFlag !== index\">{{ index + 1 }}</span>\r\n                  <span\r\n                    v-else\r\n                    class=\"iconfont icon-bar-chart-fill\"\r\n                    style=\"color: orange; font-size: 1.3rem\"\r\n                  ></span>\r\n                  <div class=\"zj_text\">\r\n                    <h3 :class=\"tapFlag == index ? 'active' : ''\">\r\n                      {{ song.name }}\r\n                    </h3>\r\n                    <div class=\"gray csl\">\r\n                      <span>{{ song.ar }}</span> - {{ song.al.name }}\r\n                    </div>\r\n                  </div>\r\n                  <span class=\"iconfont icon-yuandiancaidan\"></span>\r\n                </li>\r\n              </van-list>\r\n            </div>\r\n          </div>\r\n          <div class=\"search_tip\" v-if=\"searchInput && searchFlag\">\r\n            <ul>\r\n              <li\r\n                v-for=\"tip of searchTips\"\r\n                :key=\"tip.id\"\r\n                @click=\"searchSong(tip.name)\"\r\n              >\r\n                <van-icon name=\"search\"></van-icon> <span> {{ tip.name }}</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters, mapMutations } from \"vuex\";\r\nimport { SingerFormate } from \"@/utill/formate\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchInput: \"\",\r\n      searchTips: [],\r\n      searchHot: \"\",\r\n      hotIndex: [0, 1, 2],\r\n      searchSongRes: [],\r\n      loading: false,\r\n      finished: false,\r\n      searchFlag: true,\r\n      offset: 0,\r\n      tapFlag: null,\r\n      key_history: \"\",\r\n      ideas: \"\",\r\n      wrapper: null,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"currentPlaySong\", \"keys_history\"]),\r\n  },\r\n  watch: {\r\n    keys_history(n) {\r\n      this.key_history = n;\r\n    },\r\n  },\r\n  async activated() {\r\n    this.$refs.input_van.focus();\r\n    let ooo = await this.$store.dispatch(\"search/getSearchHot\");\r\n    this.searchHot = ooo.data.data;\r\n    let xxx = await this.$store.dispatch(\"search/getSearchIdea\");\r\n    let ideas = [];\r\n    xxx.data.result.hots.map((v, i) => {\r\n      if (i < 3) {\r\n        ideas.push(v);\r\n      }\r\n    });\r\n    this.ideas = ideas;\r\n    this.$nextTick(() => {\r\n      this._initScroll();\r\n    });\r\n  },\r\n  mounted() {\r\n    //监听页面刷新事件\r\n    window.addEventListener(\"load\", () => {\r\n      if (window.localStorage.getItem(\"keywords\")) {\r\n        this.key_history =\r\n          JSON.parse(window.localStorage.getItem(\"keywords\")) || [];\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      \"search/getSearchTip\",\r\n      \"search/getSearchRes\",\r\n      \"play/getPlayUrl\",\r\n      \"play/getSongDetail\",\r\n    ]),\r\n    ...mapMutations([\r\n      \"play/setCurrentPlaySong\",\r\n      \"play/setCurrentPlayList\",\r\n      \"search/setSearchHistory\",\r\n      \"search/clearSearchHistory\",\r\n    ]),\r\n    _initScroll() {\r\n      if (!this.wrapper) {\r\n        this.wrapper = window.BScroll(this.$refs.wrapper, {\r\n          click: true,\r\n          scrollY: true,\r\n          observeDOM: true,\r\n        });\r\n      } else {\r\n        this.wrapper.refresh();\r\n      }\r\n    },\r\n    // 返回\r\n    backBtn(val) {\r\n      if (!val) {\r\n        this.$router.go(-1);\r\n      } else {\r\n        this.searchInput = \"\";\r\n        this.searchFlag = true;\r\n      }\r\n    },\r\n    // 关键词建议\r\n    async checkKeyword(keyword) {\r\n      if (!keyword) {\r\n        this.searchFlag = true;\r\n        return;\r\n      }\r\n      let tips = [];\r\n      let rrr = await this[\"search/getSearchTip\"](keyword);\r\n      Object.values(rrr.data.result).map((v) => {\r\n        v.map((m) => {\r\n          if (!m.length) {\r\n            tips.push(m);\r\n          }\r\n        });\r\n      });\r\n      this.searchTips = tips;\r\n    },\r\n\r\n    // 搜索歌曲\r\n    async searchSong(keywords) {\r\n      this.offset = 0;\r\n      this.searchInput = keywords;\r\n      this.searchFlag = false;\r\n      let keys = [];\r\n      if (window.localStorage.getItem(\"keywords\")) {\r\n        keys = JSON.parse(window.localStorage.getItem(\"keywords\"));\r\n      }\r\n      keys.push(keywords);\r\n      this[\"search/setSearchHistory\"](keys);\r\n      let data = { keywords, type: 1, offset: this.offset };\r\n      let ccc = await this[\"search/getSearchRes\"](data);\r\n      ccc.data.result.songs.map((v) => {\r\n        v.ar = SingerFormate(v.ar);\r\n      });\r\n      this.searchSongRes = ccc.data.result;\r\n      this.tapFlag = this.searchSongRes.songs.findIndex(\r\n        (v) => v.id == this.currentPlaySong.id\r\n      ); //定位当前播放歌曲\r\n    },\r\n\r\n    //加载余下\r\n    async onLoad() {\r\n      this.offset = this.offset + 1;\r\n      let data = { keywords: this.searchInput, type: 1, offset: this.offset };\r\n      let ccc = await this[\"search/getSearchRes\"](data);\r\n      ccc.data.result.songs.map((v) => {\r\n        v.ar = SingerFormate(v.ar);\r\n        this.searchSongRes.songs.push(v);\r\n      });\r\n      this[\"play/setCurrentPlayList\"](this.searchSongRes.songs);\r\n      this.loading = false;\r\n    },\r\n\r\n    // 跳转播放页面\r\n    async toPlay(id, song, index) {\r\n      let useUrl = await this[\"play/getPlayUrl\"](id); //获取歌曲url\r\n      if (!useUrl) {\r\n        this.$toast(\"当前音乐无可用资源\");\r\n        return this.toPlay(\r\n          this.allSong[index + 1].id,\r\n          this.allSong[index + 1],\r\n          index + 1\r\n        );\r\n      }\r\n      this.tapFlag = index;\r\n      song.index = index;\r\n      // this.$router.push({ name: \"songDetail\", query: { songId: id } });\r\n      this.$store.commit(\"play/switchPlayer\"); //开关\r\n\r\n      this[\"play/setCurrentPlaySong\"](song); //存放当前song\r\n      this[\"play/getSongDetail\"](id); //获取歌曲详情\r\n    },\r\n\r\n    // 清空历史记录\r\n    deleteAll() {\r\n      let that = this;\r\n      this.$dialog.confirm({\r\n        message: \"确定清空全部历史记录?\",\r\n        beforeClose: function (action, done) {\r\n          if (action === \"confirm\") {\r\n            setTimeout(that[\"search/clearSearchHistory\"], 500);\r\n            done();\r\n          } else {\r\n            done();\r\n          }\r\n        },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search_page {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  padding: 0.3rem 1rem;\r\n  header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    span {\r\n      padding: 1rem 0;\r\n    }\r\n    p {\r\n      width: 10%;\r\n      text-align: center;\r\n      padding: 1rem 0;\r\n    }\r\n  }\r\n  section {\r\n    margin-top: 0.6rem;\r\n    height: calc(100vh - 4.3rem);\r\n    overflow: hidden;\r\n    .content {\r\n      padding-bottom: 0.3rem;\r\n      .my_search {\r\n        .search_org {\r\n          .search_history {\r\n            padding: 1rem 0;\r\n            ul {\r\n              padding-top: 0.1rem;\r\n              display: flex;\r\n              flex-wrap: wrap;\r\n              li {\r\n                padding: 0.3rem 1rem;\r\n                margin: 0.3rem;\r\n                border-radius: 1rem;\r\n                color: rgb(124, 121, 121);\r\n                background-color: white;\r\n              }\r\n            }\r\n          }\r\n          .search_hot {\r\n            background-color: white;\r\n            padding: 1rem;\r\n            border-radius: 1rem;\r\n            h2 {\r\n              padding: 0 0 1rem 0;\r\n              border-bottom: 1px solid gainsboro;\r\n            }\r\n            ul {\r\n              margin-top: 0.8rem;\r\n              li {\r\n                display: flex;\r\n                align-items: center;\r\n                padding: 0.6rem 0.2rem;\r\n                span {\r\n                  width: 1.1125rem;\r\n                }\r\n                p {\r\n                  margin: 0 0.4rem;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        .search_res {\r\n          .ul_song {\r\n            .li_song {\r\n              display: flex;\r\n              justify-content: space-between;\r\n              align-items: center;\r\n              padding: 1rem;\r\n\r\n              .zj_text {\r\n                width: 75vw;\r\n                margin-left: 0.3rem;\r\n                h3,\r\n                h6 {\r\n                  text-overflow: ellipsis;\r\n                  white-space: nowrap;\r\n                  overflow: hidden;\r\n                }\r\n                .gray {\r\n                  color: rgb(68, 64, 64);\r\n                }\r\n                .active {\r\n                  color: red;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .search_tip {\r\n        ul {\r\n          li {\r\n            display: flex;\r\n            font-size: 1rem;\r\n            align-items: center;\r\n          }\r\n          span {\r\n            width: 100%;\r\n            margin-left: 0.2rem;\r\n            padding: 0.8rem 0.2rem;\r\n            border-bottom: 0.0625rem solid gainsboro;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchView.vue?vue&type=template&id=96a7b622&scoped=true&\"\nimport script from \"./SearchView.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchView.vue?vue&type=style&index=0&id=96a7b622&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"96a7b622\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","on","$event","backBtn","searchInput","ref","attrs","checkKeyword","type","indexOf","_k","keyCode","key","searchSong","model","value","callback","$$v","expression","_v","searchFlag","_e","key_history","deleteAll","_l","index","_s","_m","ideas","idea","first","searchHot","hot","score","searchWord","style","color","hotIndex","iconUrl","searchSongRes","searchQcReminder","qcReminders","qcReminder","highLight","textDecoration","qcReminderPart","finished","onLoad","loading","songs","song","id","toPlay","tapFlag","class","name","ar","al","searchTips","tip","staticRenderFns","data","offset","wrapper","computed","watch","keys_history","xxx","mounted","window","JSON","methods","_initScroll","click","scrollY","observeDOM","Object","v","tips","keys","keywords","ccc","message","beforeClose","setTimeout","done","component"],"sourceRoot":""}