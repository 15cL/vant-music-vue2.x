{"version":3,"file":"js/736.83f35805.js","mappings":"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","sources":["webpack://vue-littlefivemusic/./src/views/search/SearchRes/SearchRes.vue","webpack://vue-littlefivemusic/src/views/search/SearchRes/SearchRes.vue","webpack://vue-littlefivemusic/./src/views/search/SearchRes/SearchRes.vue?6eff","webpack://vue-littlefivemusic/./src/views/search/SearchRes/SearchRes.vue?3cda"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('BS_Scroll',{ref:\"res_wrap\",class:['wrapper', _vm.currentPlaySong.id ? 'has_play' : 'no_play'],attrs:{\"data\":_vm.searchSongRes.songs,\"pullup\":_vm.pullup,\"click\":true},on:{\"pullup\":_vm.onLoad}},[_c('div',{staticClass:\"search_res\"},[(_vm.searchSongRes.searchQcReminder)?_c('div',{staticClass:\"tip\"},_vm._l((_vm.searchSongRes.searchQcReminder\n          .qcReminders),function(qcReminder,index){return _c('span',{key:index,style:({\n          color: qcReminder.highLight ? 'rgb(110, 110, 171)' : '',\n          textDecoration: qcReminder.highLight ? 'underline' : '',\n        })},[_vm._v(_vm._s(qcReminder.qcReminderPart))])}),0):_vm._e(),_c('h2',[_vm._v(\"单曲\")]),_c('ul',{staticClass:\"ul_song\"},_vm._l((_vm.searchSongRes.songs),function(song,index){return _c('li',{key:song.id,staticClass:\"li_song\",on:{\"click\":function($event){return _vm.toPlay(song.id, song, index)}}},[(_vm.tapFlag !== index)?_c('span',[_vm._v(_vm._s(index + 1))]):_c('span',{staticClass:\"iconfont icon-bar-chart-fill\",staticStyle:{\"color\":\"orange\",\"font-size\":\"1.3rem\"}}),_c('div',{staticClass:\"zj_text\"},[_c('h3',{class:_vm.tapFlag == index ? 'active' : ''},[_vm._v(\" \"+_vm._s(song.name)+\" \")]),_c('div',{staticClass:\"gray csl\"},[_c('span',[_vm._v(_vm._s(song.ar))]),_vm._v(\" - \"+_vm._s(song.al.name)+\" \")])]),_c('span',{staticClass:\"iconfont icon-yuandiancaidan\"})])}),0),(_vm.loading)?_c('van-loading',{attrs:{\"size\":\"1.5rem\",\"vertical\":\"\"}},[(!_vm.finished)?_c('span',[_vm._v(\"加载中...\")]):_vm._e()]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <BS_Scroll\r\n    ref=\"res_wrap\"\r\n    :data=\"searchSongRes.songs\"\r\n    :pullup=\"pullup\"\r\n    @pullup=\"onLoad\"\r\n    :click=\"true\"\r\n    :class=\"['wrapper', currentPlaySong.id ? 'has_play' : 'no_play']\"\r\n  >\r\n    <div class=\"search_res\">\r\n      <div class=\"tip\" v-if=\"searchSongRes.searchQcReminder\">\r\n        <span\r\n          v-for=\"(qcReminder, index) of searchSongRes.searchQcReminder\r\n            .qcReminders\"\r\n          :key=\"index\"\r\n          :style=\"{\r\n            color: qcReminder.highLight ? 'rgb(110, 110, 171)' : '',\r\n            textDecoration: qcReminder.highLight ? 'underline' : '',\r\n          }\"\r\n          >{{ qcReminder.qcReminderPart }}</span\r\n        >\r\n      </div>\r\n      <h2>单曲</h2>\r\n      <ul class=\"ul_song\">\r\n        <li\r\n          class=\"li_song\"\r\n          v-for=\"(song, index) in searchSongRes.songs\"\r\n          :key=\"song.id\"\r\n          @click=\"toPlay(song.id, song, index)\"\r\n        >\r\n          <span v-if=\"tapFlag !== index\">{{ index + 1 }}</span>\r\n          <span\r\n            v-else\r\n            class=\"iconfont icon-bar-chart-fill\"\r\n            style=\"color: orange; font-size: 1.3rem\"\r\n          ></span>\r\n          <div class=\"zj_text\">\r\n            <h3 :class=\"tapFlag == index ? 'active' : ''\">\r\n              {{ song.name }}\r\n            </h3>\r\n            <div class=\"gray csl\">\r\n              <span>{{ song.ar }}</span> - {{ song.al.name }}\r\n            </div>\r\n          </div>\r\n          <span class=\"iconfont icon-yuandiancaidan\"></span>\r\n        </li>\r\n      </ul>\r\n      <van-loading v-if=\"loading\" size=\"1.5rem\" vertical>\r\n        <span v-if=\"!finished\">加载中...</span>\r\n      </van-loading>\r\n    </div>\r\n  </BS_Scroll>\r\n</template>\r\n\r\n<script>\r\nimport { SingerFormate } from \"@/utill/formate\";\r\nimport { mapActions, mapGetters, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  props: [\"keyword\"],\r\n  data() {\r\n    return {\r\n      offset: \"\",\r\n      searchSongRes: \"\",\r\n      tapFlag: null,\r\n      loading: true,\r\n      finished: false,\r\n      pullup: true,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"currentPlaySong\"]),\r\n  },\r\n  watch: {\r\n    currentPlaySong() {\r\n      if (this.keyword) {\r\n        this.searchSong(this.keyword);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    if (this.keyword) {\r\n      this.searchSong(this.keyword);\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"search/getSearchRes\", \"play/getPlayUrl\"]),\r\n    ...mapMutations([\r\n      \"search/setSearchHistory\",\r\n      \"play/setCurrentPlaySong\",\r\n      \"play/setCurrentPlayList\",\r\n    ]),\r\n    // 搜索歌曲\r\n    async searchSong(keywords) {\r\n      this.offset = 0;\r\n\r\n      // 储存历史搜索关键词\r\n      let keyArr = JSON.parse(window.localStorage.getItem(\"keywords\")) || [];\r\n\r\n      // 判断是否已含有相同\r\n      let keyIndex = keyArr.findIndex((v) => v == keywords);\r\n      if (keyIndex == -1) {\r\n        keyArr.unshift(keywords);\r\n        this[\"search/setSearchHistory\"](keyArr);\r\n      }\r\n\r\n      // 搜索歌曲\r\n      let data = { keywords, type: 1, offset: this.offset };\r\n      let ccc = await this[\"search/getSearchRes\"](data);\r\n      ccc.data.result.songs.map((v) => {\r\n        v.ar = SingerFormate(v.ar);\r\n      });\r\n      this.searchSongRes = ccc.data.result;\r\n\r\n      // 存放当前歌单\r\n      this[\"play/setCurrentPlayList\"](this.searchSongRes.songs);\r\n\r\n      //定位当前播放歌曲\r\n      this.tapFlag = this.searchSongRes.songs.findIndex(\r\n        (v) => v.id == this.currentPlaySong.id\r\n      );\r\n    },\r\n\r\n    //加载余下\r\n    async onLoad() {\r\n      if (this.finished) {\r\n        return;\r\n      }\r\n      this.pullup = true;\r\n\r\n      this.offset = this.offset + 1;\r\n      if (this.offset >= 6) {\r\n        this.pullup = false;\r\n        return;\r\n      }\r\n\r\n      let data = { keywords: this.keyword, type: 1, offset: this.offset };\r\n      let ccc = await this[\"search/getSearchRes\"](data);\r\n      if (this.searchSongRes) {\r\n        ccc.data.result.songs.map((v) => {\r\n          v.ar = SingerFormate(v.ar);\r\n          this.searchSongRes.songs.push(v);\r\n        });\r\n      }\r\n      this[\"play/setCurrentPlayList\"](this.searchSongRes.songs);\r\n      this.loading = false;\r\n    },\r\n\r\n    // 跳转播放页面\r\n    async toPlay(id, song, index) {\r\n      let useUrl = await this[\"play/getPlayUrl\"](id); //获取歌曲url\r\n      if (!useUrl) {\r\n        this.$toast(\"当前音乐无可用资源\");\r\n        return this.toPlay(\r\n          this.allSong[index + 1].id,\r\n          this.allSong[index + 1],\r\n          index + 1\r\n        );\r\n      }\r\n      this.tapFlag = index; //切换播放状态\r\n      this.$store.commit(\"play/switchPlayer\"); //开关\r\n\r\n      this[\"play/setCurrentPlaySong\"](song); //存放当前song\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  overflow: hidden;\r\n  .search_res {\r\n    padding: 0.3rem 0 2rem;\r\n    .ul_song {\r\n      .li_song {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 1rem;\r\n\r\n        .zj_text {\r\n          width: 75vw;\r\n          margin-left: 0.3rem;\r\n          h3,\r\n          h6 {\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n          }\r\n          .gray {\r\n            color: rgb(68, 64, 64);\r\n          }\r\n          .active {\r\n            color: red;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.has_play {\r\n  height: calc(100vh - 9rem);\r\n}\r\n.no_play {\r\n  height: calc(100vh - 3.265rem);\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchRes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchRes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchRes.vue?vue&type=template&id=63f014cd&scoped=true&\"\nimport script from \"./SearchRes.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchRes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchRes.vue?vue&type=style&index=0&id=63f014cd&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63f014cd\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","class","currentPlaySong","id","attrs","searchSongRes","songs","pullup","on","onLoad","staticClass","searchQcReminder","_l","qcReminders","qcReminder","index","key","style","color","highLight","textDecoration","_v","_s","qcReminderPart","_e","song","$event","toPlay","tapFlag","staticStyle","name","ar","al","loading","finished","staticRenderFns","props","data","offset","computed","watch","created","methods","keyArr","keywords","type","ccc","v","component"],"sourceRoot":""}