"use strict";(self["webpackChunkvue_littlefivemusic"]=self["webpackChunkvue_littlefivemusic"]||[]).push([[635],{9635:function(t,a,s){s.r(a),s.d(a,{default:function(){return h}});var l=function(){var t=this,a=t._self._c;return a("div",{staticClass:"list_page"},[a("div",{staticClass:"btn_tilte"},[a("span",{staticClass:"iconfont icon-xiangzuo",staticStyle:{"font-size":"1.1rem"},on:{click:t.backBtn}}),a("span",[t._v("歌单")]),a("van-icon",{attrs:{name:"search"}})],1),a("div",{ref:"user_wrap",staticClass:"wrapper",style:[{overflow:"hidden"},{height:t.currentPlaySong.id?"calc(100vh - 8.8rem)":"calc(100vh - 4.5rem)"}]},[a("div",{ref:"niu",staticClass:"content"},[a("header",[a("div",{staticClass:"list_detail"},[a("img",{staticClass:"img_style",attrs:{src:t.listDetail.coverImgUrl}}),a("div",{staticClass:"detail_right"},[a("h3",{staticClass:"list_title"},[t._v(t._s(t.listDetail.name))]),a("h5",{staticClass:"list_creator"},[t._v(" "+t._s(t.listDetail.creator.nickname)+" "),a("van-icon",{attrs:{name:"arrow"}})],1),a("h6",{staticClass:"list_des"},[t._v(" "+t._s(t.listDetail.description)+" ")])])])]),a("section",[a("ul",t._l(t.allSong,(function(s,l){return a("li",{key:s.al.id,on:{click:function(a){return t.toPlay(s.id,s,l)}}},[t.tapFlag!==l?a("span",[t._v(t._s(l+1))]):a("span",{staticClass:"iconfont icon-bar-chart-fill",staticStyle:{color:"orange","font-size":"1.3rem"}}),a("div",{staticClass:"zj_text"},[a("h3",{class:t.tapFlag==l?"active":""},[t._v(" "+t._s(s.name)+" ")]),a("div",{staticClass:"gray csl"},[a("span",[t._v(t._s(s.ar))]),t._v(" - "+t._s(s.al.name)+" ")])]),a("span",{staticClass:"iconfont icon-yuandiancaidan"})])})),0)])])])])},i=[],e=(s(7658),s(3822)),n=s(472),r={data(){return{listDetail:{},lists:[],allSong:[],tapFlag:null,user_wrap:""}},async created(){let t=this.$route.query.listId;this.getPlayListDetail(t);let a=await this.getAllPlaySong(t);this.$nextTick((()=>{this._initScroll()})),this.tapFlag=a.findIndex((t=>t.id==this.currentPlaySong.id))},computed:{...(0,e.Se)(["currentPlaySong","showPlayerFlag"])},watch:{currentPlaySong(t){this.tapFlag=t.index}},methods:{...(0,e.nv)(["playlist/getPlayListDetail","playlist/getAllPlaySong","play/getPlayUrl","play/getSongDetail"]),...(0,e.OI)(["play/setCurrentPlaySong","play/setCurrentPlayList"]),backBtn(){this.$router.go(-1)},_initScroll(){this.user_wrap?this.user_wrap.refresh():this.user_wrap=window.BScroll(this.$refs.user_wrap,{click:!0,scrollY:!0,observeDOM:!0})},async getPlayListDetail(t){let a=await this["playlist/getPlayListDetail"](t);this.listDetail=a.data.playlist},async getAllPlaySong(t){let a=await this["playlist/getAllPlaySong"](t),s=[];a.data.songs?.map((t=>{s.push(t.id)}));let l=await this["play/getSongDetail"](s);return l.data.songs?.map(((t,a)=>l.data.songs[a].ar=(0,n.v)(t.ar))),this["play/setCurrentPlayList"](l.data.songs),this.allSong=l.data.songs,l.data.songs},async toPlay(t,a,s){let l=await this["play/getPlayUrl"](t);if(!l)return this.$toast("当前音乐无可用资源"),this.toPlay(this.allSong[s+1].id,this.allSong[s+1],s+1);this.tapFlag=s,a.index=s,this.$store.commit("play/switchPlayer"),this["play/setCurrentPlaySong"](a),this["play/getSongDetail"](t)}}},c=r,o=s(1001),g=(0,o.Z)(c,l,i,!1,null,"66bb0553",null),h=g.exports}}]);
//# sourceMappingURL=635.e45d9915.js.map